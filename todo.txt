- we'll have to add a "task list ready" listener and add all the dynamic tasks.  Probably we'll have to enforce 
dependency order here (subnets before security groups, etc)
- parameterize config file name
- tag everything with env
- delete env 


get vpc id
get ids of all resources with env tag
create subnets
create security groups
create database
  save credentials and url, add to Chef data bag
create appserver instances
  different availability zones
  bootstrap with knife
  run chef-client
create elb
  associate with appservers
create bastion
create NAT?
switch EIP over to new stack
copy old logs over to s3
remove old stack

PARAMETERS
env (required)
numAppServers (default = 2)

TAGS
env=prod,stag
name=appserver,dbserver,nat,bastion